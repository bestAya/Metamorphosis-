# Http 协议

## 浏览器行为与HTTP协议

处理流程：

* 输入网址并回车
* 解析域名
* 浏览器发送HTTP 
* 服务器处理请求
* 服务器返回HTML响应
* 浏览器处理HTML页面
* 继续请求其他资源

## 什么是HTTP协议

* HTTP是超文本传输协议，从www浏览器传送到本地浏览器的一种协议，网站是基于HTTP协议的，例如网站的图片、css、js
* HTTP协议是有客户机到服务器的请求和从服务器到客户及的响应进行约束和规范

## 了解TCP/IP协议栈

* 应用层
  * 为用户提供各种服务
* 传输层
  * 为应用层提供端到端的通行功能，保证数据报的正常执行和数据的完整性
  * 该层定义了两个主要协议TCP(传输控制协议)UDP

## 

* HTTP默认端口80
* HTTPs默认端口443

## HTTP的工作过程

> 事务：要执行一个操作或者多个过程只要在过程中出现错误机会停止

* 一次HTTP操作称为一个事务，其工作分为4部。
* 客户端与服务器建立连接TCP
* 建立连接，客户发送请求给服务器
* 服务器接到请求后给与响应信息其格式为一个状态行，包括信息的协议版本号一个成功的或错误的代码，后面是MIME信息实体信息和可能的内容
* 客户端接收到服务器返回的信息通过浏览器显示在用户屏幕上然后客户机与服务器断开连接断开连接
* 如果在以上过程某一步出现错误，那么产生错误的信息将返回到客户端上，有显示屏输出对于用户来书这写过程是有HTTP自己完成的用户只需要点击鼠标等待。

## 请求与响应

* HTTP请求组成：请求行、请求头、消息报头
* HTTP响应组成：报文协议、状态码及其状态描述、响应体
* 请求行组成：以一个方发符号开头，后面跟着请求的URL和协议的版本
* 状态行组成:服务器HTTP协议的版本，服务器发挥的响应状态码和状态大妈和状态大妈的文本描述

>Connection 控制连接
>场链接（keep-alive）一次连接一次断开
>短连接 多次连接多次断开
>User-Agent 识别浏览器 + 设备 + 内核 + 浏览器的版本

## 请求方法

* `get`
* `post`
* `head`:请求获取由Requerst-URL所标识的资源响应消息报头
* `put`:向服务器存储一个资源
* `delete`
* `trace`
* `connect`:HTTP/1.1协议中预留给能够连接改为管道方式的代理服务器
* `options`:请求查询服务器的性能，或者查询与资源相关的选项需求

## 状态码

* 1xx:指示信息
* 2xx:成功--标识请求成功
* 3xx:重定向--要完成请求必须进行更进一步的操作
* 4xx:客户端错误--请求有语法错误或请求无法实现
* 5xx:服务器错误--服务器未能实现合法请求

## cookies 与 session

* Cookies是保存在客户端的小本文本，随客户端点每个一个请求发送该url下的所有cookie到服务器端
* Session则保存在服务器端，通过唯一的值sessionID来区别每一用户SessionID随每个链接请求发送到服务器，服务器根据sessionID来识别客户端再通过Session的key获取

## Cookie使用

* 与Cookie相关的HTTP扩展头
* Cookie:客户段将服务器设置的Cookie返回到服务器
* Set-Cookie:服务器向客户端设置Cookie
* 服务器在响应消息中用set-cookie头将Cookie的内容送会给客户端，客户端在新的请求中将相同的内容携带在cookie头中发送给服务器。从而实现会话的保持

## Session的使用

* 使用Cookie来实现
* 使用URL回显来实现

## HTTP缓存机制

为什么缓存 ？

提高效率 节省网络资源

## 缓存机制流程

## HTTPS协议分析

* HTTPS 与HTTP是两种协议
* HTTPS是基于以上实现
* 加密基于现代密码学
* 使用ssl协议加密协议+TLS（核心）+ HTTP+ 握手协议
* 数字证书 识别身份（ca）
* CA数字证书的签发机构

>SSL是一种记录协议，扩展很好方便添加子协议，握手协议是SSLde 子协议

## HTTP2协议分析

注意 不是HTTPS

* 伪头: `:path` 前面有冒号的
* 支持此协议会升级到2如果不支持会自动降级
* 使用二进制传输
* 对报头压缩
* 多路复用
* 服务器主动推送
* 默认加密

伪头

请求伪头

* ：method


## 反向代理

什么代理

什么是反向代理

## 反向代理用途

* 加密加速
* 负载均衡
* 缓存静态内容
* 压缩
* 减速上传
* 安全
* 外网发布